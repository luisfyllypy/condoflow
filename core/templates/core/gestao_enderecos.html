{% extends 'core/base.html' %}
{% load static %}

{% block title %}Gestão de Endereços | {{ block.super }}{% endblock %}

{% block content %}
<div class="container py-4">

    <!-- Cabeçalho e Botão de Ação -->
    <div class="d-flex justify-content-between align-items-center pb-3 mb-4 border-bottom">
        <h1 class="h2">Gestão de Endereços</h1>
        <button type="button" class="btn btn-primary" data-bs-toggle="modal" data-bs-target="#selecionarTipoEnderecoModal">
            <i class="bi bi-plus-lg"></i> Cadastrar Novo Endereço
        </button>
    </div>

    <!-- Abas de Navegação para Tipos de Endereço -->
    <ul class="nav nav-tabs" id="enderecoTabs" role="tablist">
        <li class="nav-item" role="presentation">
            <button class="nav-link active" id="geral-tab" data-bs-toggle="tab" data-bs-target="#geral-pane" type="button" role="tab" aria-controls="geral-pane" aria-selected="true">
                <i class="bi bi-journal-text"></i> Endereços (Geral)
            </button>
        </li>
        <li class="nav-item" role="presentation">
            <button class="nav-link" id="casa-tab" data-bs-toggle="tab" data-bs-target="#casa-pane" type="button" role="tab" aria-controls="casa-pane" aria-selected="false">
                <i class="bi bi-house-door-fill"></i> Casas
            </button>
        </li>
        <li class="nav-item" role="presentation">
            <button class="nav-link" id="apto-tab" data-bs-toggle="tab" data-bs-target="#apto-pane" type="button" role="tab" aria-controls="apto-pane" aria-selected="false">
                <i class="bi bi-building-fill"></i> Apartamentos
            </button>
        </li>
        <li class="nav-item" role="presentation">
            <button class="nav-link" id="area-tab" data-bs-toggle="tab" data-bs-target="#area-pane" type="button" role="tab" aria-controls="area-pane" aria-selected="false">
                <i class="bi bi-pin-map-fill"></i> Áreas Comuns
            </button>
        </li>
    </ul>

    <!-- Conteúdo das Abas -->
    <div class="tab-content" id="enderecoTabsContent">
        <!-- Painel: Endereço Geral -->
        <div class="tab-pane fade show active" id="geral-pane" role="tabpanel" aria-labelledby="geral-tab" tabindex="0">
            <div class="card shadow-sm border-top-0 rounded-top-0">
                <div class="card-body">
                    <form method="get" action="" class="mb-4">
                        <div class="row g-3">
                            <div class="col-md-10">
                                <input type="text" class="form-control" name="busca_numero_geral" placeholder="Buscar pelo número do endereço...">
                            </div>
                            <div class="col-md-2">
                                <button type="submit" class="btn btn-secondary w-100">Buscar</button>
                            </div>
                        </div>
                    </form>
                    <div class="table-responsive">
                        <table class="table table-striped table-hover align-middle">
                            <thead class="table-dark">
                                <tr>
                                    <th>Identificação</th>
                                    <th>Número</th>
                                    <th>Tipo</th>
                                </tr>
                            </thead>
                            <tbody>
                                <!-- Exemplo -->
                                <tr>
                                    <td>Casa nº 101, Rua das Flores</td>
                                    <td>101</td>
                                    <td><span class="badge text-bg-info">Casa</span></td>
                                </tr>
                                <tr>
                                    <td>Apto nº 202, Andar 2</td>
                                    <td>202</td>
                                    <td><span class="badge text-bg-warning">Apartamento</span></td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                </div>
            </div>
        </div>

        <!-- Painel: Casas -->
        <div class="tab-pane fade" id="casa-pane" role="tabpanel" aria-labelledby="casa-tab" tabindex="0">
            <div class="card shadow-sm border-top-0 rounded-top-0">
                 <div class="card-body">
                    <form method="get" action="" class="mb-4">
                        <div class="row g-3">
                            <div class="col-md-10">
                                <input type="text" class="form-control" name="busca_casa" placeholder="Buscar por número, rua ou conjunto...">
                            </div>
                            <div class="col-md-2">
                                <button type="submit" class="btn btn-secondary w-100">Buscar</button>
                            </div>
                        </div>
                    </form>
                    <div class="table-responsive">
                        <table class="table table-striped table-hover align-middle">
                            <thead class="table-dark">
                                <tr><th>Número</th><th>Rua</th><th>Conjunto</th></tr>
                            </thead>
                            <tbody>
                                <tr><td>101</td><td>Rua das Flores</td><td>A</td></tr>
                                <tr><td>102</td><td>Rua das Margaridas</td><td>B</td></tr>
                            </tbody>
                        </table>
                    </div>
                 </div>
            </div>
        </div>

        <!-- Painel: Apartamentos -->
        <div class="tab-pane fade" id="apto-pane" role="tabpanel" aria-labelledby="apto-tab" tabindex="0">
            <div class="card shadow-sm border-top-0 rounded-top-0">
                <div class="card-body">
                    <form method="get" action="" class="mb-4">
                        <div class="row g-3">
                            <div class="col-md-10">
                                <input type="text" class="form-control" name="busca_apto" placeholder="Buscar por número, andar ou prédio...">
                            </div>
                            <div class="col-md-2">
                                <button type="submit" class="btn btn-secondary w-100">Buscar</button>
                            </div>
                        </div>
                    </form>
                    <div class="table-responsive">
                        <table class="table table-striped table-hover align-middle">
                            <thead class="table-dark">
                                <tr><th>Número</th><th>Andar</th><th>Prédio/Bloco</th></tr>
                            </thead>
                            <tbody>
                                <tr><td>202</td><td>2º</td><td>Orquídea</td></tr>
                                <tr><td>305</td><td>3º</td><td>Bromélia</td></tr>
                            </tbody>
                        </table>
                    </div>
                </div>
            </div>
        </div>

        <!-- Painel: Áreas Comuns -->
        <div class="tab-pane fade" id="area-pane" role="tabpanel" aria-labelledby="area-tab" tabindex="0">
             <div class="card shadow-sm border-top-0 rounded-top-0">
                <div class="card-body">
                     <form method="get" action="" class="mb-4">
                        <div class="row g-3">
                            <div class="col-md-6">
                                <input type="text" class="form-control" name="busca_area" placeholder="Buscar por nome ou número...">
                            </div>
                            <div class="col-md-4">
                               <select class="form-select" name="reservavel">
                                   <option value="">Reservável? (Todos)</option>
                                   <option value="true">Sim</option>
                                   <option value="false">Não</option>
                               </select>
                            </div>
                            <div class="col-md-2">
                                <button type="submit" class="btn btn-secondary w-100">Buscar</button>
                            </div>
                        </div>
                    </form>
                    <div class="table-responsive">
                        <table class="table table-striped table-hover align-middle">
                            <thead class="table-dark">
                                <tr><th>Nome</th><th>Número</th><th>Localização</th><th class="text-center">Reservável?</th><th>Lotação Máx.</th></tr>
                            </thead>
                            <tbody>
                                <tr><td>Salão de Festas</td><td>1</td><td>Térreo, Bloco A</td><td class="text-center"><i class="bi bi-check-circle-fill text-success"></i></td><td>50</td></tr>
                                <tr><td>Piscina</td><td>2</td><td>Área externa central</td><td class="text-center"><i class="bi bi-x-circle-fill text-danger"></i></td><td>30</td></tr>
                            </tbody>
                        </table>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- MODAL PARA SELECIONAR O TIPO DE ENDEREÇO A SER CRIADO -->
    <div class="modal fade" id="selecionarTipoEnderecoModal" tabindex="-1" aria-labelledby="modalLabel" aria-hidden="true">
      <div class="modal-dialog modal-dialog-centered">
        <div class="modal-content">
          <div class="modal-header">
            <h5 class="modal-title" id="modalLabel">Selecione o Tipo de Endereço</h5>
            <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
          </div>
          <div class="modal-body">
            <p>Qual tipo de endereço você gostaria de cadastrar?</p>
            <div class="d-grid gap-3">
                <a href="{% url 'detalhe_endereco' %}" class="btn btn-outline-primary btn-lg">
                    <i class="bi bi-house-door-fill me-2"></i> Casa
                </a>
                <a href="#" class="btn btn-outline-primary btn-lg">
                    <i class="bi bi-building-fill me-2"></i> Apartamento
                </a>
                <a href="#" class="btn btn-outline-primary btn-lg">
                    <i class="bi bi-pin-map-fill me-2"></i> Área Comum
                </a>
            </div>
          </div>
          <div class="modal-footer">
            <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Cancelar</button>
          </div>
        </div>
      </div>
    </div>
</div>
{% endblock %}
